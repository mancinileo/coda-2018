<!DOCTYPE html>
<html>
  <head>
    <title>Regressão linear? Inferência? Saia do básico para nunca mais errar em estatística</title>
    <meta charset="utf-8">
    <meta name="author" content="Renata Hirota | Volt Data Lab" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Regressão linear? Inferência? Saia do básico para nunca mais errar em estatística
### Renata Hirota | Volt Data Lab
### 10 de novembro de 2018

---

class: middle, center

# Sobre o Volt Data Lab
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;


---

## Jornalismo + Dados
&lt;br&gt;
&lt;img src="imgs/volt.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
---
class: middle, center
# Vamos à *estatística*
&lt;img src="imgs/yay.gif" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
---
## O que é **estatística**?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
&lt;br&gt;
Organizar, descrever, analisar e interpretar dados
--
&lt;br&gt;&lt;br&gt;
- Estatística descritiva (descrever e resumir dados)
- Probabilidade (teoria matemática para estudar a incerteza)
- Inferência estatística (extrapolação de informações e conclusões a partir dos dados)


---
## Falando em inferência...
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
&lt;br&gt;
Dois conceitos: **amostra** e **população**
--
&lt;br&gt;&lt;br&gt;
### População
Conjunto de valores de uma característica observável associado a um grupo de indivíduos.&lt;br&gt;
Exemplo: idade dos brasileiros
--
&lt;br&gt;&lt;br&gt;
### Amostra
Qualquer subconjunto de uma população.&lt;br&gt;
Exemplo: idade dos participantes do Coda; idade das pessoas neste workshop

---

## Mas e daí? 
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
&lt;br&gt;
Nem sempre é possível (ou desejável) obter informações diretamente da **população**.
Utilizamos **amostras** para fazer suposições sobre a população e estudar suas características.
--
&lt;br&gt;&lt;br&gt;
A **inferência** tem como objetivo estudar generalizações sobre uma população através de evidências fornecidas por uma amostra dessa população, inclusive medindo quão *incerta* é a generalização.

&lt;img src="imgs/inferencia.png" height=280 style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---

## Suponha que você está fazendo uma sopa...
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="imgs/sopa.jpg" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
&lt;br&gt;&lt;br&gt;
### Como você sabe se a sopa precisa de mais sal?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
&lt;br&gt;
Tomar a sopa inteira?&lt;br&gt;
--
Experimentar uma colher?

--
&lt;br&gt;
### Depois de adicionar o sal, o que garante que a sopa como um todo estará mais salgada?
--
&lt;br&gt;
Misturamos a sopa para que ela fique *homogênea* e, assim, qualquer *amostra* que retirarmos dela para experimentar seja representativa do todo.

---
## Resumindo:
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

População a ser estudada &lt;br&gt;&lt;br&gt;
`\(\downarrow\)` &lt;br&gt;&lt;br&gt;
Retira-se amostra(s) &lt;br&gt;&lt;br&gt;
`\(\downarrow\)` &lt;br&gt;&lt;br&gt;
Análise do conjunto de dados e conclusões!&lt;br&gt;&lt;br&gt;
`\(\downarrow\)` &lt;br&gt;&lt;br&gt;
Extrapolação de informações e conclusões sobre a amostra à população, *com um grau de incerteza*

---
class: middle, center
# Alguns conceitos importantes
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
---
### Média
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
&lt;br&gt;
`\(\bar X = \frac{(X_1 + X_2 + X_3 + ... + X_N)}{N}\)`

--
&lt;br&gt;
### Variância
--
&lt;br&gt;
`\(Var(X) = \frac{(X_1 - \mu)^2 + ( X_2 - \mu)^2 + ... + (X_n - \mu)^2}{N}\)`
--
&lt;br&gt;
### Correlação (Pearson)
--
&lt;br&gt;
`\(\rho_{X,Y} = \frac {cov(X,Y)}{\sqrt {var(X) \: var(Y)}} = \frac {\sum_{i=1}^n (x_i-\bar x)(y_i - \bar y)}{\sqrt {var(X) \: var(Y)}}\)`

---
## Mas, na prática...
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

`&gt; mean(x)`&lt;br&gt;
`&gt; var(x)`&lt;br&gt;
`&gt; cor(x,y)`

&lt;img src="imgs/correlsheets.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
## Resumindo:
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
&lt;br&gt;
&lt;img src="imgs/math.gif" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;
&lt;br&gt;&lt;br&gt;
Qualquer calculadora faz contas. &lt;br&gt;O importante é entender o que está acontecendo!

---
class: middle, center

# Regressão linear simples
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
---
## O que é regressão linear?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
Técnica para __quantificar__ a mudança observada em uma variável quando variamos o valor de outra.&lt;br&gt;
--
&lt;img src="index_files/figure-html/unnamed-chunk-1-1.png" style="display: block; margin: auto;" /&gt;


Dados: https://www.kaggle.com/vmhatre7686/linear-regression-problems/data
---
## Motivação
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

Se eu sei que um jogador tem o atributo `pass` igual a 80, quanto espera-se que seja o seu atributo `shoot`?

--

## O que queremos

Prever valores de uma variável (resposta) em função de outra (explicativa)

--
## Ideia

Ajustar uma equação de reta de forma a minimizar a soma do quadrado das distâncias de cada ponto à reta

---

## Peraí, equação de reta?

&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--
Y = **a**X + **b**

em que

- **a** é o *coeficiente angular*
- **b** é o *coeficiente linear* ou *intercepto*
--

&lt;img src="imgs/reta1.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;
---
## Peraí, equação de reta?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

Y = **a**X + **b**

em que

- **a** é o *coeficiente angular*
- **b** é o *coeficiente linear* ou *intercepto*

&lt;img src="imgs/reta2.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---

## Voltando à regressão
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

`$$Y = a\,X + b + erro$$`

O método de regressão linear estima os coeficientes `\(a\)` e `\(b\)`, a partir dos pares `\((X, Y)\)` observados, em que

* __X__ é a variável explicativa
* __Y__ é a variável resposta
* __erro__ é a diferença entre o valor esperado e o valor observado, para cada par (X, Y)

No nosso caso, queremos encontrar o valor de `sho` (Y) em função de `pas` (X) &lt;br&gt;

---
## E por que __essa__ reta?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;
---

## Não poderia ser a reta azul?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;

---
## Ou a verde?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;
---
## Minimizar a soma do quadrado das distâncias de cada ponto
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

A reta da regressão (vermelha) é a melhor reta entre todas, porque a soma do quadrado da _distância_ de cada ponto em relação a ela é a __menor possível__.
&lt;br&gt;&lt;br&gt;
&lt;img src="imgs/minimosquadrados.png" height=340 style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
## "Beleza, já entendi o que é regressão! Mãos à obra"
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
--

&lt;img src="imgs/wait.gif" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
## Suposições / hipóteses necessárias
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
### Relação *linear* entre duas variáveis numéricas 
Lembra do coeficiente de correlação de Pearson? Use-o. &lt;br&gt;


```r
var_explicativa &lt;- c(1,2,3,4,5,6,7,8,9,10)
var_resposta &lt;- c(1,3,7,8,12,12,14,15,17,22)
cor(var_explicativa, var_resposta, method="pearson")
```

```
## [1] 0.9834809
```
--
- Quanto mais próximo de __1__: mais _positivamente_ correlacionados
- Quanto mais próximo de __-1__: mais _negativamente_ correlacionados
- Quanto mais próximo de __0__: ausência de correlação

---
## Suposições / hipóteses necessárias
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

Plotar os dados também ajuda a visualizar e ter uma ideia de como eles se relacionam.
--

```r
plot(x = var_explicativa, y = var_resposta)
```

&lt;img src="index_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;
---
## Suposições / hipóteses necessárias
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
### Exemplos de relações linear e não lineares

&lt;img src="imgs/linear.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
## Suposições / hipóteses necessárias
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

### Distribuição normal dos erros
Erros são aleatórios, com média igual a zero e variância constante

```r
hist(rnorm(1000, mean=0, sd=1), prob=TRUE)
curve(dnorm(x, mean=0, sd=1), add = TRUE, col="red", lwd=2)
```

&lt;img src="index_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;
---
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="imgs/buguei.gif" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;
---
## Na prática, os dados são mais ou menos assim...

&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="imgs/homoscedasticidade.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
## ...e não assim
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="imgs/heteroscedasticidade.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
class: middle, center

# Agora sim: vamos ao _RStudio_ !
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

---
## Abra o RStudio e crie um novo script
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="imgs/rstudio1.png" style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---
## Vamos dar uma olhada nos dados
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;


```r
# Carregando os dados
dados &lt;- read.csv("dados/fifa_reduzido.csv")

# Vamos dar uma olhada nas primeiras linhas
head(dados)
```

```
##       ID              name                club age height_cm weight_kg
## 1  20801 Cristiano Ronaldo      Real Madrid CF  32       185        80
## 2 158023          L. Messi        FC Barcelona  30       170        72
## 3 190871            Neymar Paris Saint-Germain  25       175        68
## 4 176580         L. Suárez        FC Barcelona  30       182        86
## 5 167495          M. Neuer    FC Bayern Munich  31       193        92
## 6 188545    R. Lewandowski    FC Bayern Munich  28       185        79
##   nationality eur_value eur_wage eur_release_clause overall potential pac
## 1    Portugal  9.55e+07   565000          195800000      94        94  90
## 2   Argentina  1.05e+08   565000          215300000      93        93  89
## 3      Brazil  1.23e+08   280000          236800000      92        94  92
## 4     Uruguay  9.70e+07   510000          198900000      92        92  82
## 5     Germany  6.10e+07   230000          100700000      92        92  91
## 6      Poland  9.20e+07   355000          151800000      91        91  81
##   sho pas dri def phy international_reputation skill_moves
## 1  93  82  90  33  80                        5           5
## 2  90  86  96  26  61                        5           4
## 3  84  79  95  30  60                        5           5
## 4  90  79  87  42  81                        5           4
## 5  90  95  89  60  91                        5           1
## 6  88  75  86  38  82                        4           3
```
---
## Quanta coisa... Vamos ver só o nome, 'sho' e 'pas'?
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

```r
dados2 &lt;- data.frame(nome = dados$name, sho = dados$sho, pas = dados$pas)
head(dados2)
```

```
##                nome sho pas
## 1 Cristiano Ronaldo  93  82
## 2          L. Messi  90  86
## 3            Neymar  84  79
## 4         L. Suárez  90  79
## 5          M. Neuer  90  95
## 6    R. Lewandowski  88  75
```
---
## Plotando sho X pas
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;


```r
plot(x = dados2$pas, y = dados$sho)
```

&lt;img src="index_files/figure-html/unnamed-chunk-10-1.png" style="display: block; margin: auto;" /&gt;
Parece linear! E _homoscedástico_

---
## Adicionando a reta de regressão
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;


```r
plot(x = dados2$pas, y = dados$sho)
abline(lm(dados2$sho ~ dados2$pas), col="red")
```

&lt;img src="index_files/figure-html/unnamed-chunk-11-1.png" style="display: block; margin: auto;" /&gt;

---
## Valores de __a__ e __b__
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;


```r
lm(dados$sho ~ dados2$pas)
```

```
## 
## Call:
## lm(formula = dados$sho ~ dados2$pas)
## 
## Coefficients:
## (Intercept)   dados2$pas  
##      4.0776       0.8588
```
--
### Interpretação
- __a__ (coeficiente angular): quanto a variação de `sho` influencia em `pas`
- __b__ (intercepto): valor esperado de `sho` quando `pas` é igual a zero

---
## Alguns métodos de avaliação de qualidade do ajuste
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

- Coeficiente de determinação `\(R^2\)`
- Gráficos de resíduos padronizados
- Distância de Cook

https://www.statmethods.net/stats/rdiagnostics.html

---
## Coeficiente de determinação `\(R^2\)`
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

`$$R^2 = \frac{SQReg}{SQTot} = 1 -\frac{SQRes}{SQTot}$$`
em que &lt;br&gt;&lt;br&gt;
`\(SQTot = \sum_{i=1}^n (y_i - \bar y)^2\)` &lt;br&gt;
`\(SQReg = \sum{i=1}^n (\hat y_i - \bar y)^2\)` &lt;br&gt;
`\(SQRes = \sum{i=1}^n (y_i - \hat y_i)^2\)`

--
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="imgs/what.gif" height=270 style=" display: block; margin-left: auto; margin-right: auto;"&gt;&lt;/img&gt;

---

## Coeficiente de determinação `\(R^2\)`
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

O Coeficiente de determinação `\(R^2\)` mede o quanto da variabilidade da resposta é explicada pela regressão


```r
fit &lt;- lm(dados2$sho ~ dados2$pas)
summary(fit)$r.squared
```

```
## [1] 0.4222103
```
---
## Distância de Cook
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;


```r
plot(fit, which=4)
```

&lt;img src="index_files/figure-html/unnamed-chunk-14-1.png" style="display: block; margin: auto;" /&gt;
&lt;br&gt;
Valores que se destacam no gráfico são chamados _pontos de alavanca_ e devem ser investigados

---
## Ex: área e valor de imóveis
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;table class="kable_wrapper"&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td&gt; 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; area &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; valor &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 69 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 410 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 67 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 415 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 63 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 316 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 67 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 480 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 400 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 82 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 640 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 53 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 350 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 430 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 640 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

 &lt;/td&gt;
   &lt;td&gt; 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; area &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; valor &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 225 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 225 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 230 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 230 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 50 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 256 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 53 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 50 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 270 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 63 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 319 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 348 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---
class: middle, center
## Tentem ajustar uma reta de regressão no R!

&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

arquivo `imob.csv`
---
## Regressão linear: preço e área de imóveis
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;

&lt;img src="index_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;" /&gt;

---
# Referências
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;


* __Noções de Probabilidade e Estatística__&lt;br&gt;
  Marcos Nascimento Magalhães e Antonio Carlos Pedroso de Lima&lt;br&gt;
  https://www.ime.usp.br/~noproest
  
* __Penn State__ &lt;br&gt;
  Curso STAT 414 &lt;br&gt;
  https://onlinecourses.science.psu.edu/stat414/

* __Linear regression in real life__&lt;br&gt;
  https://link.medium.com/JTDsTwbZAR

---
class: middle, center
# Obrigada!
&lt;img src="https://static1.squarespace.com/static/551da417e4b05f67005d6abe/t/58f8173a1e5b6ca0cc4339f0/1541080220923/?format=100w" style=" display: block; margin-left: auto; margin-right: auto; position: absolute; top: 16px; right: 16px; opacity: 0.5"&gt;&lt;/img&gt;
[@renata_mh](https://twitter.com/renata_mh)&lt;br&gt;
renata@voltdata.info&lt;br&gt;

https://www.voltdata.info
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
